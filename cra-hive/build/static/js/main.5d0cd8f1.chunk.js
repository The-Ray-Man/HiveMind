(this["webpackJsonpcra-hive"]=this["webpackJsonpcra-hive"]||[]).push([[0],{105:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(3),i=n(2),a=Object(r.a)((function t(e,n){Object(i.a)(this,t),this.insect=void 0,this.team=void 0,this.insect=e,this.team=n}))},122:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(16),i=n(0),a=n(54),o=n(21),c=n(126),s=n(30),u=n(7);function h(t){var e=t.stone,n=t.layout,h=void 0===n?o.k:n,l=t.hex,f=t.handleClick,d=void 0===f?function(){}:f,v=t.height,b=void 0===v?0:v,j=e.team===s.a.WHITE?"red":"blue",O=Object(i.useRef)(null),g=Object(i.useState)(!1),p=Object(r.a)(g,2),m=p[0],x=p[1],y=o.j(h,l),k=y.x,w=y.y,E=h.orientation,S=Object(a.useSpring)({color:m?"grey":j,rotation:m?[0,Math.PI,0]:[0,0,0]});return Object(u.jsx)(i.Suspense,{fallback:null,children:Object(u.jsxs)("group",{position:[k,w,b],rotation:[Math.PI/2,E===o.m?Math.PI/6:0,0],onClick:function(){d(l)},children:[Object(u.jsxs)(a.animated.mesh,{position:[0,-.5,0],ref:O,onPointerOver:function(t){return x(!0)},onPointerOut:function(t){return x(!1)},children:[Object(u.jsx)("cylinderBufferGeometry",{args:[1,1,.25,6]}),Object(u.jsx)(a.animated.meshStandardMaterial,{color:S.color})]}),Object(u.jsx)(c.a,{insect:e.insect,rotation:S.rotation})]})})}},126:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(19),i=n(55),a=n(34),o=n(185),c=n(24),s=n(54),u=n(7),h=["insect"];function l(t){var e=t.insect,n=Object(i.a)(t,h),l=Object(a.e)(o.a,"/objects/".concat(e,"/").concat(e===c.a.BEE?"bumblebee":e,".gltf")).scene.clone();return Object(u.jsx)(s.animated.primitive,Object(r.a)({object:l},n))}},153:function(t,e,n){"use strict";var r=n(23),i=n(16),a=n(0),o=n(34),c=n(237),s=n(21),u=n(122),h=n(54),l=n(30),f=n(7);function d(t){var e=t.layout,n=t.hex,r=t.team,o=t.height,c=t.handleClick,u=void 0===c?function(){return console.log("no Click handler given")}:c,d=Object(a.useRef)(null),v=Object(a.useState)(!1),b=Object(i.a)(v,2),j=b[0],O=b[1],g=Object(h.useSpring)({opacity:j?.9:.3}).opacity,p=s.j(e,n),m=p.x,x=p.y,y=e.orientation,k=r===l.a.WHITE?"red":"blue";return Object(f.jsxs)("mesh",{position:[m,x,o-.5],rotation:[Math.PI/2,y===s.m?Math.PI/6:0,0],onClick:function(){u(n)},ref:d,onPointerOver:function(t){return O(!0)},onPointerOut:function(t){return O(!1)},children:[Object(f.jsx)("cylinderBufferGeometry",{args:[1,1,.25,6]}),Object(f.jsx)(h.animated.meshStandardMaterial,{color:k,transparent:!0,opacity:g})]})}var v=n(215);e.a=function(t){var e,n=t.hive,h=t.handleClick,l=void 0===h?function(){return console.log("No click handler given")}:h,b=t.highlighted,j=void 0===b?[]:b,O=t.team,g=void 0===O?null:O,p=t.interactive,m=void 0===p||p,x=Object(a.useState)(s.k),y=Object(i.a)(x,2),k=y[0],w=y[1],E=[],S=Object(r.a)(n.map.keys());try{var _=function(){var t=e.value;n.map.get(t).forEach((function(e,n){E.push(Object(f.jsx)(u.a,{hex:t,stone:e,height:n,layout:k,handleClick:l}))}))};for(S.s();!(e=S.n()).done;)_()}catch(q){S.e(q)}finally{S.f()}var C=[];return j.forEach((function(t){var e=Object(i.a)(t,2),n=e[0],r=e[1];C.push(Object(f.jsx)(d,{layout:k,hex:n,team:g,handleClick:l,height:r}))})),Object(f.jsxs)("div",{style:{position:"relative",height:"50vw"},children:[Object(f.jsxs)(o.a,{camera:{near:.1,far:100},children:[m?Object(f.jsx)(c.a,{}):null,Object(f.jsx)("ambientLight",{}),Object(f.jsx)("pointLight",{position:[10,10,10]}),E,C]}),Object(f.jsx)(v.a,{onClick:function(){return w(k===s.k?s.l:s.k)},children:" Toggle Layout "})]})}},158:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(16),i=n(0),a=n(50),o=n(105);function c(t,e){var n=Object(i.useState)(null),c=Object(r.a)(n,2),s=c[0],u=c[1],h=Object(i.useState)(null),l=Object(r.a)(h,2),f=l[0],d=l[1];return{highlighted:f?e.getDestinations(s,f):[],handleBoardClick:function(n){if(f){var r=new s.constructor(f,n);t(r)?(d(null),u(null)):d(null)}else e.allowedToMove(n)&&(u(new a.b),d(n))},handleDropClick:function(t){e.allowedToDrop(t)?(u(new a.a),d(new o.a(t,e.team))):d(null)}}}},166:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(178),i=n(176),a=n(7);function o(t){var e=t.p1,n=t.p2,o=Object(i.a)(),c=o.state,s=o.apply,u=(c.turnNumber%2===0?e:n)((function(t){return!!c.isLegal(t)&&(s(t),!0)}),c);return Object(a.jsx)(r.a,{state:c,controller:u})}},176:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(16),i=n(0),a=n(76);function o(){var t=Object(i.useState)([]),e=Object(r.a)(t,2),n=e[0],o=e[1],c=Object(i.useState)(new a.a),s=Object(r.a)(c,2),u=s[0],h=s[1],l=Object(i.useState)(0),f=Object(r.a)(l,2),d=f[0],v=f[1];return{apply:function(t){n[d]=t,o(n),h(u.apply(t)),v(d+1)},undo:function(){var t=n[d];h(u.undo(t)),v(d-1)},state:u,reset:function(){o([]),h(new a.a),v(0)}}}},178:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var r=n(153),i=n(23),a=n(16),o=n(0),c=n(30),s=n(24),u=(n(34),n(126),n(215)),h=n(112),l=n(228),f=(n(54),n(7));function d(t){var e,n,r=t.stones,c=t.active,l=t.handleClick,d=t.allowedToDrop,v=void 0===d?function(t){return!0}:d,b=Object(o.useState)(null),j=Object(a.a)(b,2)[1],O={},g=Object(i.a)(r);try{for(g.s();!(n=g.n()).done;){var p=n.value,m=p.insect,x=p.team;e=x,O.hasOwnProperty(m)?O[m]++:O[m]=1}}catch(k){g.e(k)}finally{g.f()}var y={beetle:"bug",bee:"chess queen",spider:"chess pawn",grasshopper:"chess knight",ant:"chess bishop"};return Object(f.jsx)(f.Fragment,{children:Array.from(Object.values(s.a)).map((function(t,n){var r=O[t],i=c&&v(t),a="white"===e?"red":"blue";return Object(f.jsxs)(u.a,{as:"div",disabled:!i,labelPosition:"right",onClick:function(){l(t),j(t)},children:[Object(f.jsx)(u.a,{color:a,icon:y[t]}),Object(f.jsx)(h.a,{as:"a",basic:!0,pointing:"left",children:r||0})]},t)}))})}function v(t){var e=t.stones,n=t.team,r=t.handleClick,i=void 0===r?function(){return console.log("No click handler given")}:r,a=t.allowedToDrop;return Object(f.jsxs)(l.a,{children:[Object(f.jsx)(u.a.Group,{size:"tiny",children:Object(f.jsx)(d,{active:n===c.a.BLACK,stones:e.get(c.a.BLACK),handleClick:n===c.a.BLACK?i:function(){},allowedToDrop:a})}),Object(f.jsx)(u.a.Group,{size:"tiny",children:Object(f.jsx)(d,{active:n===c.a.WHITE,stones:e.get(c.a.WHITE),handleClick:n===c.a.WHITE?i:function(){},allowedToDrop:a})})]})}var b=n(232),j=n(43);function O(t){var e=t.open,n=t.result,r=Object(a.a)(n,2),i=r[0],o=r[1],c=i&&o,s=o&&o!==i;return Object(f.jsxs)(b.a,{dimmer:"blurring",open:e,children:[Object(f.jsx)(b.a.Header,{children:" Game Over !"}),Object(f.jsx)(b.a.Content,{children:c?"It's a tie!":s?"Team RED wins":"Team BLUE wins"}),Object(f.jsx)(b.a.Actions,{children:Object(f.jsx)(u.a,{negative:!0,as:j.b,to:"/",children:"Leave"})})]})}function g(t){var e=t.state,n=t.controller,i=n.highlighted,a=n.handleBoardClick,o=n.handleDropClick;return Object(f.jsxs)("div",{children:[Object(f.jsx)(O,{open:e.gameOver,result:e.result}),Object(f.jsx)(v,{stones:e._stones,team:e.team,handleClick:o,allowedToDrop:e.allowedToDrop.bind(e)}),Object(f.jsx)(r.a,{hive:e.hive,handleClick:a,highlighted:i,team:e.team})]})}},21:function(t,e,n){"use strict";function r(t,e){return{x:t,y:e}}function i(t,e,n){if(n=-(t+e),0!==Math.round(t+e+n))throw Error("q + r + s must be 0");return{q:t,r:e,s:n}}function a(t,e){return t.q===e.q&&t.r===e.r}function o(t,e){return i(t.q+e.q,t.r+e.r,t.s+e.s)}function c(t,e){return i(t.q-e.q,t.r-e.r,t.s-e.s)}function s(t,e){return i(t.q*e,t.r*e,t.s*e)}n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return a})),n.d(e,"d",(function(){return o})),n.d(e,"i",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return h})),n.d(e,"e",(function(){return l})),n.d(e,"b",(function(){return C})),n.d(e,"n",(function(){return q})),n.d(e,"m",(function(){return M})),n.d(e,"j",(function(){return T})),n.d(e,"o",(function(){return I})),n.d(e,"k",(function(){return D})),n.d(e,"l",(function(){return N}));var u=[i(1,0,-1),i(1,-1,0),i(0,-1,1),i(-1,0,1),i(-1,1,0),i(0,1,-1)];function h(t){return u.map((function(e){return function(t,e){return o(t,e)}(t,e)}))}function l(t){for(var e=h(t),n=[],r=0;r<6;r++)n.push([e[r],e[(r+1)%6],e[(r+2)%6]]);return n}var f=[i(2,-1,-1),i(1,-2,1),i(-1,-1,2),i(-2,1,1),i(-1,2,-1),i(1,1,-2)];function d(t,e){return n=c(t,e),(Math.abs(n.q)+Math.abs(n.r)+Math.abs(n.s))/2;var n}function v(t){var e=Math.round(t.q),n=Math.round(t.r),r=Math.round(t.s),a=Math.abs(e-t.q),o=Math.abs(n-t.r),c=Math.abs(r-t.s);return a>o&&a>c?e=-n-r:o>c?n=-e-r:r=-e-n,i(e,n,r)}function b(t,e,n){return i(t.q*(1-n)+e.q*n,t.r*(1-n)+e.r*n,t.s*(1-n)+e.s*n)}function j(t,e){return{col:t,row:e}}var O=-1;function g(t,e){var n=e.q,r=e.r+(e.q+t*(1&e.q))/2;if(1!==t&&t!==O)throw Error("offset must be EVEN (+1) or ODD (-1)");return j(n,r)}function p(t,e){var n=e.col,r=e.row-(e.col+t*(1&e.col))/2,a=-n-r;if(1!==t&&t!==O)throw Error("offset must be EVEN (+1) or ODD (-1)");return i(n,r,a)}function m(t,e){var n=e.q+(e.r+t*(1&e.r))/2,r=e.r;if(1!==t&&t!==O)throw Error("offset must be EVEN (+1) or ODD (-1)");return j(n,r)}function x(t,e){var n=e.col-(e.row+t*(1&e.row))/2,r=e.row,a=-n-r;if(1!==t&&t!==O)throw Error("offset must be EVEN (+1) or ODD (-1)");return i(n,r,a)}function y(t,e){return{col:t,row:e}}function k(t){return y(t.q,2*t.r+t.q)}function w(t){var e=t.col,n=(t.row-t.col)/2;return i(e,n,-e-n)}function E(t){return y(2*t.q+t.r,t.r)}function S(t){var e=(t.col-t.row)/2,n=t.row;return i(e,n,-e-n)}function _(t,e,n,r,i,a,o,c,s){return{f0:t,f1:e,f2:n,f3:r,b0:i,b1:a,b2:o,b3:c,start_angle:s}}function C(t,e,n){return{orientation:t,size:e,origin:n}}var q=_(Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,.5),M=_(1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0);function T(t,e){var n=t.orientation,i=t.size,a=t.origin,o=(n.f0*e.q+n.f1*e.r)*i.x,c=(n.f2*e.q+n.f3*e.r)*i.y;return r(o+a.x,c+a.y)}function A(t,e){var n=t.orientation,a=t.size,o=t.origin,c=r((e.x-o.x)/a.x,(e.y-o.y)/a.y),s=n.b0*c.x+n.b1*c.y,u=n.b2*c.x+n.b3*c.y;return i(s,u,-s-u)}function P(t,e){var n=t.orientation,i=t.size,a=2*Math.PI*(n.start_angle-e)/6;return r(i.x*Math.cos(a),i.y*Math.sin(a))}function I(t,e){for(var n=[],i=T(t,e),a=0;a<6;a++){var o=P(t,a);n.push(r(i.x+o.x,i.y+o.y))}return n}var D=C(M,r(1,1),r(0,0)),N=C(q,r(1,1),r(0,0));function B(t){console.log("FAIL",t)}function H(t,e,n){e.q===n.q&&e.s===n.s&&e.r===n.r||B(t)}function R(t,e,n){e.col===n.col&&e.row===n.row||B(t)}function L(t,e,n){e.col===n.col&&e.row===n.row||B(t)}function W(t,e,n){e!==n&&B(t)}function G(){H("hex_direction",i(0,-1,1),u[2])}function J(){H("hex_diagonal",i(-1,-1,2),o(i(1,-2,1),f[3]))}function F(){var t;H("hex_rotate_right",(t=i(1,-3,2),i(-t.r,-t.s,-t.q)),i(3,-2,-1))}function z(){var t;H("hex_rotate_left",(t=i(1,-3,2),i(-t.s,-t.q,-t.r)),i(-2,-1,3))}function K(){!function(t,e,n){W(t,e.length,n.length);for(var r=0;r<e.length;r++)H(t,e[r],n[r])}("hex_linedraw",[i(0,0,0),i(0,-1,1),i(0,-2,2),i(1,-3,2),i(1,-4,3),i(1,-5,4)],function(t,e){for(var n=d(t,e),r=i(t.q+1e-6,t.r+1e-6,t.s-2e-6),a=i(e.q+1e-6,e.r+1e-6,e.s-2e-6),o=[],c=1/Math.max(n,1),s=0;s<=n;s++)o.push(v(b(r,a,c*s)));return o}(i(0,0,0),i(1,-5,4)))}H("hex_add",i(4,-10,6),o(i(1,-3,2),i(3,-7,4))),H("hex_subtract",i(-2,4,-2),c(i(1,-3,2),i(3,-7,4))),G(),J(),W("hex_distance",7,d(i(3,-7,4),i(0,0,0))),F(),z(),function(){var t=i(0,0,0),e=i(1,-1,0),n=i(0,-1,1);H("hex_round 1",i(5,-10,5),v(b(i(0,0,0),i(10,-20,10),.5))),H("hex_round 2",v(t),v(b(t,e,.499))),H("hex_round 3",v(e),v(b(t,e,.501))),H("hex_round 4",v(t),v(i(.4*t.q+.3*e.q+.3*n.q,.4*t.r+.3*e.r+.3*n.r,.4*t.s+.3*e.s+.3*n.s))),H("hex_round 5",v(n),v(i(.3*t.q+.3*e.q+.4*n.q,.3*t.r+.3*e.r+.4*n.r,.3*t.s+.3*e.s+.4*n.s)))}(),K(),function(){var t=i(3,4,-7),e=C(M,r(10,15),r(35,71));H("layout",t,v(A(e,T(e,t))));var n=C(q,r(10,15),r(35,71));H("layout",t,v(A(n,T(n,t))))}(),function(){var t=i(3,4,-7),e=j(1,-3);H("conversion_roundtrip even-q",t,p(1,g(1,t))),R("conversion_roundtrip even-q",e,g(1,p(1,e))),H("conversion_roundtrip odd-q",t,p(O,g(O,t))),R("conversion_roundtrip odd-q",e,g(O,p(O,e))),H("conversion_roundtrip even-r",t,x(1,m(1,t))),R("conversion_roundtrip even-r",e,m(1,x(1,e))),H("conversion_roundtrip odd-r",t,x(O,m(O,t))),R("conversion_roundtrip odd-r",e,m(O,x(O,e)))}(),R("offset_from_cube even-q",j(1,3),g(1,i(1,2,-3))),R("offset_from_cube odd-q",j(1,2),g(O,i(1,2,-3))),H("offset_to_cube even-",i(1,2,-3),p(1,j(1,3))),H("offset_to_cube odd-q",i(1,2,-3),p(O,j(1,2))),function(){var t=i(3,4,-7),e=y(1,-3);H("conversion_roundtrip doubled-q",t,w(k(t))),L("conversion_roundtrip doubled-q",e,k(w(e))),H("conversion_roundtrip doubled-r",t,S(E(t))),L("conversion_roundtrip doubled-r",e,E(S(e)))}(),L("doubled_from_cube doubled-q",y(1,5),k(i(1,2,-3))),L("doubled_from_cube doubled-r",y(4,2),E(i(1,2,-3))),H("doubled_to_cube doubled-q",i(1,2,-3),w(y(1,5))),H("doubled_to_cube doubled-r",i(1,2,-3),S(y(4,2)))},213:function(t,e){},214:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),a=n(80),o=n.n(a),c=n(43),s=n(28),u=n(23),h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fps:20},n=Object(r.useRef)(null),i=e.fps;return Object(r.useEffect)((function(){var e,r=n.current,a=r.getContext("2d"),o=0;return function n(){o++,t(a,o),f(r),l(r),setTimeout((function(){e=window.requestAnimationFrame(n)}),1e3/i)}(),function(){window.cancelAnimationFrame(e)}}),[t]),n};function l(t){var e=t.getBoundingClientRect(),n=e.width,r=e.height;if(t.width!==n||t.height!==r){var i=window.devicePixelRatio,a=void 0===i?1:i,o=t.getContext("2d");return t.width=n*a,t.height=r*a,o.scale(a,a),!0}return!1}function f(t){var e=t.getBoundingClientRect(),n=e.width,r=e.height;return(t.width!==n||t.height!==r)&&(t.width=n,t.height=r,!0)}var d=n(7),v=function(t){var e=t.draw,n=h(e,{fps:3});return Object(d.jsx)("canvas",{ref:n,style:{width:"100%",height:"100%",display:"block",position:"absolute",top:0,left:0,zIndex:-9999}})},b=n(21),j=n(76),O=b.n,g=b.b(O,b.c(10,10),b.c(500,250));function p(){var t=new j.a;return Object(d.jsx)(v,{draw:function(e,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle="#000000",t.apply(t.actions[Math.floor(Math.random()*t.actions.length)]);var r,i=Object(u.a)(t.hive.map.keys());try{for(i.s();!(r=i.n()).done;){var a=r.value;e.beginPath();var o=b.o(g,a);e.moveTo(o[5].x+50,o[5].y+50),o.forEach((function(t){e.lineTo(t.x+50,t.y+50)})),e.fill()}}catch(c){i.e(c)}finally{i.f()}}})}var m=n(16);function x(){var t=Object(r.useState)([]),e=Object(m.a)(t,2),n=e[0],i=e[1];return Object(r.useEffect)((function(){fetch("/game").then((function(t){return t.json()})).then((function(t){return i(t)})).catch((function(t){return console.log(t)}))}),[]),Object(d.jsx)("table",{children:n.map((function(t){return Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{children:[" ID: ",t," "]}),Object(d.jsxs)("td",{children:[" ",Object(d.jsx)(c.b,{to:{pathname:"/play/".concat(t),search:"?p1=remote&p2=local"},children:" JOIN "})]})]},t)}))})}function y(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:" Welcome to HiveMind "}),Object(d.jsx)(x,{}),Object(d.jsx)(p,{})]})}var k=n(122),w=n(34);function E(){return Object(d.jsx)("div",{style:{position:"absolute",right:0,height:"30vw"},children:Object(d.jsxs)(w.a,{camera:{near:.1,far:100},children:[Object(d.jsx)("ambientLight",{}),Object(d.jsx)("pointLight",{position:[10,10,10]}),Object(d.jsx)(k.a,{hex:b.a(0,0),stone:{team:"white",insect:"bee"}})]})})}function S(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(E,{}),Object(d.jsx)("iframe",{src:"/README.html",title:"Readme",style:{width:"100%",height:"100%",position:"absolute",border:"none"}})]})}var _=n(153),C=function(){var t=Object(r.useState)(new j.a),e=Object(m.a)(t,2),n=e[0],i=e[1],a=Object(r.useState)(0),o=Object(m.a)(a,2),c=o[0],s=o[1],u=Object(r.useState)(10),h=Object(m.a)(u,2),l=h[0],f=h[1];return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:[" Step: ",n.turnNumber]}),Object(d.jsx)("button",{onClick:function(){n.step(),s(c+1)},children:" Make a Step "}),Object(d.jsx)("button",{onClick:function(){i(new j.a),s(0)},children:" Reset "}),Object(d.jsxs)("label",{children:["How many automove steps:",Object(d.jsx)("input",{value:l,onChange:function(t){return f(t.target.value)}})]}),Object(d.jsx)("button",{onClick:function(){for(var t=0;t<l;t++)n.step();s(c+l)},children:" AutoPlay "}),Object(d.jsxs)("div",{children:["Stones: ",JSON.stringify(n.stones)]})]}),Object(d.jsx)(_.a,{hive:n.hive,highlighted:[]})]})};function q(){return Object(d.jsx)(C,{})}var M=n(158),T=n(166);var A=function(){var t=M.a,e=M.a;return Object(d.jsx)(T.a,{p1:t,p2:e})};function P(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(A,{}),Object(d.jsx)(q,{})]})}n(212);var I=n(228),D=n(235),N=n(231),B=n(215),H=n(85),R=n(232),L=n(230),W=n(234),G=n(187),J=n.n(G);function F(t){var e=t.open,n=t.setOpen,i=Object(r.useState)("local"),a=Object(m.a)(i,2),o=a[0],s=a[1],u=Object(r.useState)("red"),h=Object(m.a)(u,2),l=h[0],f=h[1];return Object(d.jsxs)(R.a,{dimmer:"blurring",open:e,children:[Object(d.jsx)(R.a.Header,{children:"Create a new Game of Hive"}),Object(d.jsx)(R.a.Content,{children:Object(d.jsx)(I.a,{children:Object(d.jsxs)(L.a,{children:[Object(d.jsx)(W.a,{as:"h3",children:"Play against"}),Object(d.jsx)(L.a.Field,{children:Object(d.jsxs)(B.a.Group,{children:[Object(d.jsx)(B.a,{onClick:function(){return s("local")},children:"Yourself "}),Object(d.jsx)(B.a.Or,{}),Object(d.jsx)(B.a,{onClick:function(){return s("ai")},children:"AI "}),Object(d.jsx)(B.a.Or,{}),Object(d.jsx)(B.a,{onClick:function(){return s("online")},children:"Friend "})]})}),Object(d.jsx)(W.a,{as:"h3",children:"Start as"}),Object(d.jsx)(L.a.Field,{children:Object(d.jsxs)(B.a.Group,{children:[Object(d.jsx)(B.a,{onClick:function(){return f("white")},color:"red",children:"red "}),Object(d.jsx)(B.a.Or,{}),Object(d.jsx)(B.a,{onClick:function(){return f("random")},color:"violet",children:"random "}),Object(d.jsx)(B.a.Or,{inverted:!0}),Object(d.jsx)(B.a,{onClick:function(){return f("black")},color:"blue",children:"blue "})]})})]})})}),Object(d.jsxs)(R.a.Actions,{children:[Object(d.jsx)(B.a,{negative:!0,onClick:function(){return n(!1)},children:"Cancel"}),Object(d.jsx)(B.a,{positive:!0,onClick:function(){n(!1)},as:c.b,to:function(t){var e=J()();return"random"===l&&f(Math.random()>.5?"white":"black"),"online"===o&&fetch("/game/".concat(e),{method:"POST"}).catch((function(t){return console.log("Failed to create game",t)})),{pathname:"/play/".concat(e),search:"?team=".concat(l,"&mode=").concat(o)}},children:"Create"})]})]})}function z(t){var e=Object(r.useState)("Home"),n=Object(m.a)(e,2),i=n[0],a=n[1],o=Object(r.useState)(!1),s=Object(m.a)(o,2),u=s[0],h=s[1],l=function(t,e){var n=e.name;return a(n)};return Object(d.jsxs)(I.a,{children:[Object(d.jsx)(D.a,{inverted:!0,children:Object(d.jsxs)(N.a,{compact:!0,inverted:!0,stackable:!0,pointing:!0,secondary:!0,children:[Object(d.jsx)(N.a.Item,{header:!0,as:c.b,to:"/debug",name:"HiveMind",children:Object(d.jsx)("img",{src:"/favicon/android-chrome-512x512.png",alt:"logo"})}),Object(d.jsx)(N.a.Item,{as:c.b,to:"/",name:"Home",onClick:l,active:"Home"===i}),Object(d.jsx)(N.a.Item,{as:c.b,to:"/about",name:"About",onClick:l,active:"About"===i}),Object(d.jsx)(N.a.Item,{name:"play",children:Object(d.jsxs)(B.a,{inverted:!0,icon:!0,labelPosition:"left",onClick:function(){return h(!0)},children:[Object(d.jsx)(H.a,{name:"plus square outline"}),"Create a Game"]})}),Object(d.jsx)(N.a.Item,{as:c.b,to:"/play/test",name:"Quick Play",onClick:l,active:"Quick Play"===i})]})}),Object(d.jsx)(F,{open:u,setOpen:h}),t.children]})}var K=Object(r.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,298))}));function V(){return Object(d.jsx)(c.a,{children:Object(d.jsx)(z,{children:Object(d.jsx)(r.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsxs)(s.c,{children:[Object(d.jsx)(s.a,{exact:!0,path:"/",component:y}),Object(d.jsx)(s.a,{path:"/play/:gid",component:K}),Object(d.jsx)(s.a,{exact:!0,path:"/debug",component:P}),Object(d.jsx)(s.a,{exact:!0,path:"/about",component:S})]})})})})}o.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(V,{})}),document.getElementById("root"))},24:function(t,e,n){"use strict";var r;!function(t){t.BEE="bee",t.SPIDER="spider",t.ANT="ant",t.GRASSHOPPER="grasshopper",t.BEETLE="beetle"}(r||(r={})),e.a=r},30:function(t,e,n){"use strict";var r;!function(t){t.WHITE="white",t.BLACK="black"}(r||(r={})),e.a=r},50:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return u}));var r=n(3),i=n(2),a=n(21),o=Object(r.a)((function t(e,n){Object(i.a)(this,t),this.origin=void 0,this.destination=void 0,this.origin=e,this.destination=n})),c=Object(r.a)((function t(e,n){Object(i.a)(this,t),this.stone=void 0,this.destination=void 0,this.stone=e,this.destination=n}));function s(t,e){return"origin"in t&&"origin"in e?Object(a.f)(t.origin,e.origin)&&Object(a.f)(t.destination,e.destination):"stone"in t&&"stone"in e?t.stone.team===e.stone.team&&t.stone.insect===e.stone.insect&&Object(a.f)(t.destination,e.destination):e===u}var u=Object(r.a)((function t(){Object(i.a)(this,t)}))},76:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(23),i=n(16),a=n(2),o=n(3),c=n(24),s=n(105),u=n(30),h=n(21),l=n(50),f=function(){function t(){Object(a.a)(this,t),this.map=new Map}return Object(o.a)(t,[{key:"get",value:function(t){return this.map.get(JSON.stringify(t))}},{key:"set",value:function(t,e){return this.map.set(JSON.stringify(t),e)}},{key:"delete",value:function(t){return this.map.delete(JSON.stringify(t))}},{key:"has",value:function(t){return this.map.has(JSON.stringify(t))}},{key:"hiveHeight",value:function(t){return this.map.has(t)?this.get(t).length:0}},{key:"hivePush",value:function(t,e){return this.map.has(t)?this.map.get(t).push(e):this.map.set(t,[e])}},{key:"hivePop",value:function(t){var e=this.map.get(t),n=e.pop();return 0===e.length&&this.map.delete(t),n}},{key:"keys",value:function(){return Array.from(this.map.keys()).map((function(t){return JSON.parse(t)}))}}]),t}(),d=function(){function t(){Object(a.a)(this,t),this.set=new Set}return Object(o.a)(t,[{key:"add",value:function(t){return this.set.add(JSON.stringify(t))}},{key:"has",value:function(t){return this.set.has(JSON.stringify(t))}},{key:"values",value:function(){return Array.from(this.set.values()).map((function(t){return JSON.parse(t)}))}}]),t}(),v=function(){function t(){Object(a.a)(this,t),this.map=void 0,this.root=void 0,this.map=new f}return Object(o.a)(t,[{key:"at",value:function(t){var e=this.map.get(t);return e[e.length-1]}},{key:"removeStone",value:function(t){this.map.get(t).pop(),this.map.get(t).length||this.map.delete(t)}},{key:"addStone",value:function(t,e){this.root=t,this.map.has(t)?this.map.get(t).push(e):this.map.set(t,[e])}},{key:"gameResult",value:function(){var t,e=!1,n=!1,i=Object(r.a)(this.map.keys());try{for(i.s();!(t=i.n()).done;){var a=t.value,o=this.map.get(a)[0];o.insect===c.a.BEE&&6===this.neighbors(a).length&&(o.team===u.a.WHITE?e=!0:n=!0)}}catch(s){i.e(s)}finally{i.f()}return[e,n]}},{key:"neighbors",value:function(t){var e=this;return h.h(t).filter((function(t){return e.map.has(t)}))}},{key:"height",value:function(t){return this.map.has(t)?this.map.get(t).length:0}},{key:"generateSingleWalks",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=[],o=Object(r.a)(h.e(t));try{for(o.s();!(e=o.n()).done;){var c=Object(i.a)(e.value,3),s=c[0],u=c[1],l=c[2];this.map.has(u)||(null===n?this.map.has(s)!==this.map.has(l)&&a.push(u):(this.map.has(s)&&!h.f(s,n))!==(this.map.has(l)&&!h.f(l,n))&&a.push(u))}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"generateWalks",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=new d,i=new f,a=[],o=[];for(a.push(t),i.set(t,0);a.length;){var c=a.shift();n.add(c);var s,u=Object(r.a)(this.generateSingleWalks(c,t));try{for(u.s();!(s=u.n()).done;){var l=s.value;n.has(l)||(i.set(l,i.get(c)+1),a.push(l))}}catch(b){u.e(b)}finally{u.f()}if(-1!==e||h.f(c,t)){var v=i.get(c);if(v>e)continue;v===e&&o.push(c)}else o.push(c)}return o}},{key:"generateSpiderWalks",value:function(t){return this.generateWalks(t,3)}},{key:"generateJumps",value:function(t){var e,n=[],i=Object(r.a)(h.g);try{for(i.s();!(e=i.n()).done;){var a=e.value;if(this.map.has(h.d(t,a))){for(var o=2;this.map.has(h.d(t,h.i(a,o)));)o++;n.push(h.d(t,h.i(a,o)))}}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"generateClimbs",value:function(t){var e=[],n=this.height(t);if(n>1){var a,o=Object(r.a)(h.e(t));try{for(o.s();!(a=o.n()).done;){var c=Object(i.a)(a.value,3),s=c[0],u=c[1],l=c[2];this.height(u)<n&&(this.height(s)<n||this.height(l)<n)&&e.push(u)}}catch(x){o.e(x)}finally{o.f()}}else e.concat(this.generateSingleWalks(t));var f,d=Object(r.a)(h.e(t));try{for(d.s();!(f=d.n()).done;){var v=Object(i.a)(f.value,3),b=v[0],j=v[1],O=v[2],g=this.height(b),p=this.height(j),m=this.height(O);p>=n&&!(g>n&&m>n)&&e.push(j)}}catch(x){d.e(x)}finally{d.f()}return e}},{key:"_checkNeighborTeam",value:function(t,e){var n=this;return this.neighbors(t).every((function(t){return n.at(t).team===e}))}},{key:"generateDrops",value:function(t){var e,n=this,i=new d,a=Object(r.a)(this.map.keys());try{for(a.s();!(e=a.n()).done;){var o=e.value;h.h(o).filter((function(t){return!n.map.has(t)})).forEach((function(t){return i.add(t)}))}}catch(c){a.e(c)}finally{a.f()}return i.values().filter((function(e){return n._checkNeighborTeam(e,t)}))}},{key:"_oneHive",value:function(){var t=this,e=new f,n=new d,i=new f,a=new d;return void 0!==this.root&&function o(c,s,u){n.add(c),u++,i.set(c,u),e.set(c,u);var l,f=0,d=Object(r.a)(t.neighbors(c));try{for(d.s();!(l=d.n()).done;){var v=l.value;s&&h.f(v,s)||(n.has(v)?e.set(c,Math.min(e.get(c),i.get(v))):(o(v,c,u),e.set(c,Math.min(e.get(c),e.get(v))),e.get(v)>=i.get(c)&&null!==s&&a.add(c),f++))}}catch(b){d.e(b)}finally{d.f()}null===s&&f>=2&&a.add(c)}.call(this,this.root,null,0),a}},{key:"generateMovesFrom",value:function(t){return this.map.has(t)?new Map([[c.a.BEE,this.generateSingleWalks],[c.a.SPIDER,this.generateSpiderWalks],[c.a.ANT,this.generateWalks],[c.a.GRASSHOPPER,this.generateJumps],[c.a.BEETLE,this.generateClimbs]]).get(this.at(t).insect).call(this,t):(console.log("Cannot generate moves: no stones at ".concat(t)),[])}},{key:"generateMoves",value:function(t){var e,n=this,i=[],a=this._oneHive(),o=Object(r.a)(this.map.keys());try{var c=function(){var r=e.value;n.at(r).team===t&&(n.height(r)>1||!a.has(r))&&n.generateMovesFrom(r).forEach((function(t){i.push([r,t])}))};for(o.s();!(e=o.n()).done;)c()}catch(s){o.e(s)}finally{o.f()}return i}}]),t}(),b=function(){function t(){var e=this;Object(a.a)(this,t),this.hive=void 0,this.turnNumber=void 0,this._stones=void 0,this._beeMove=void 0,this._actions=void 0,this.startingInsects=[c.a.BEE,c.a.SPIDER,c.a.SPIDER,c.a.ANT,c.a.ANT,c.a.ANT,c.a.GRASSHOPPER,c.a.GRASSHOPPER,c.a.GRASSHOPPER,c.a.BEETLE,c.a.BEETLE],this.hive=new v,this.turnNumber=0,this._beeMove=new Map([[u.a.WHITE,!1],[u.a.BLACK,!1]]),this._stones=new Map;for(var n=function(){var t=i[r];e._stones.set(t,e.startingInsects.map((function(e){return new s.a(e,t)})))},r=0,i=[u.a.WHITE,u.a.BLACK];r<i.length;r++)n()}return Object(o.a)(t,[{key:"stones",get:function(){return this._stones.get(this.team)}},{key:"team",get:function(){return this.turnNumber%2===0?u.a.WHITE:u.a.BLACK}},{key:"gameOver",get:function(){return!!this.result.some((function(t){return t}))}},{key:"result",get:function(){return this.hive.gameResult()}},{key:"moveAllowed",get:function(){return this._beeMove.get(this.team)}},{key:"generateDrops",value:function(){return 0===this.turnNumber?[h.a(0,0)]:1===this.turnNumber?[h.a(0,-1)]:this.hive.generateDrops(this.team)}},{key:"_getActions",value:function(){var t=this,e=[],n=this.stones.map((function(t){return t.insect})),r=new Set(n),a=Array.from(r).map((function(e){return new s.a(e,t.team)}));return this.turnNumber>=6&&!this.moveAllowed?this.hive.generateDrops(this.team).forEach((function(n){return e.push(new l.a(new s.a(c.a.BEE,t.team),n))})):a.length&&this.generateDrops().forEach((function(t){return a.forEach((function(n){return e.push(new l.a(n,t))}))})),this.moveAllowed&&this.hive.generateMoves(this.team).forEach((function(t){var n=Object(i.a)(t,2),r=n[0],a=n[1];e.push(new l.b(r,a))})),e.length?e:[l.c]}},{key:"actions",get:function(){return this._actions||(this._actions=this._getActions()),this._actions}},{key:"isLegal",value:function(t){return this.actions.some((function(e){return Object(l.d)(t,e)}))}},{key:"apply",value:function(t){var e;if("origin"in t)e=this.hive.at(t.origin),this.hive.removeStone(t.origin),this.hive.addStone(t.destination,e);else if("stone"in t){(e=t.stone).insect===c.a.BEE&&this._beeMove.set(this.team,!0);var n=-1;this.stones.forEach((function(t,r){e.insect===t.insect&&(n=r)})),this.stones.splice(n,1),this.hive.addStone(t.destination,e)}return delete this._actions,this.turnNumber++,this}},{key:"undo",value:function(t){var e;return"origin"in t?(e=this.hive.at(t.destination),this.hive.removeStone(t.destination),this.hive.addStone(t.origin,e)):"stone"in t&&((e=t.stone).insect===c.a.BEE&&this._beeMove.set(this.team,!1),this.stones.push(e),this.hive.removeStone(t.destination)),delete this._actions,this.turnNumber--,this}},{key:"step",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;return this.apply(t(this.actions))}},{key:"allowedToMove",value:function(t){if(this.moveAllowed){var e,n=Object(r.a)(this.actions);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i instanceof l.b&&h.f(i.origin,t))return!0}}catch(a){n.e(a)}finally{n.f()}}return!1}},{key:"allowedToDrop",value:function(t){var e,n=Object(r.a)(this.actions);try{for(n.s();!(e=n.n()).done;){var i=e.value;if("stone"in i&&i.stone.insect===t)return!0}}catch(a){n.e(a)}finally{n.f()}return!1}},{key:"getDestinations",value:function(t,e){var n=this,r=[];return t instanceof l.b?r=this.hive.generateMovesFrom(e).map((function(t){return[t,n.hive.height(t)]})):t instanceof l.a&&(r=this.generateDrops().map((function(t){return[t,0]}))),r}}]),t}();function j(t){return t[Math.floor(Math.random()*t.length)]}}},[[214,1,2]]]);
//# sourceMappingURL=main.5d0cd8f1.chunk.js.map